<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"qianyan.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Senior Consultant | DevOps Master | Blockchain &amp; Web3 Specialist">
<meta property="og:type" content="website">
<meta property="og:title" content="鄢倩">
<meta property="og:url" content="https://qianyan.github.io/page/7/index.html">
<meta property="og:site_name" content="鄢倩">
<meta property="og:description" content="Senior Consultant | DevOps Master | Blockchain &amp; Web3 Specialist">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Ryan Qian">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://qianyan.github.io/page/7/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/7/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>鄢倩</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">鄢倩</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">(conj clojurians me)</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Ryan Qian</p>
  <div class="site-description" itemprop="description">Senior Consultant | DevOps Master | Blockchain & Web3 Specialist</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">81</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/qianyan" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qianyan" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:qianyan.lambda@gmail.com" title="E-Mail → mailto:qianyan.lambda@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://weibo.com/3672207020" title="Weibo → http:&#x2F;&#x2F;weibo.com&#x2F;3672207020" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://x.com/_qian_yan" title="Twitter → https:&#x2F;&#x2F;x.com&#x2F;_qian_yan" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://lambdaisland.com/blog" title="https:&#x2F;&#x2F;lambdaisland.com&#x2F;blog" rel="noopener" target="_blank">Lambdaisland</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://www.youtube.com/@SystemCrafters" title="https:&#x2F;&#x2F;www.youtube.com&#x2F;@SystemCrafters" rel="noopener" target="_blank">System Crafters</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://aphyr.com/" title="https:&#x2F;&#x2F;aphyr.com" rel="noopener" target="_blank">Aphyr</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://bucharestfp.ro/" title="http:&#x2F;&#x2F;bucharestfp.ro" rel="noopener" target="_blank">Bucharest FP</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="http://blog.rlmflores.me/" title="http:&#x2F;&#x2F;blog.rlmflores.me&#x2F;" rel="noopener" target="_blank">Rodrigo Flores</a>
            </li>
            <li class="links-of-blogroll-item">
              <a href="https://seancorfield.github.io/" title="https:&#x2F;&#x2F;seancorfield.github.io&#x2F;" rel="noopener" target="_blank">Seancorfield</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/11/02/thinking-in-ioc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/11/02/thinking-in-ioc/" class="post-title-link" itemprop="url">Thinking in IoC</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-11-02 17:09:57" itemprop="dateCreated datePublished" datetime="2014-11-02T17:09:57+08:00">2014-11-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:39:15" itemprop="dateModified" datetime="2016-09-06T22:39:15+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="为什么要面向接口编程？"><a href="#为什么要面向接口编程？" class="headerlink" title="为什么要面向接口编程？"></a>为什么要面向接口编程？</h3><hr>
<h4 id="背景提要"><a href="#背景提要" class="headerlink" title="背景提要"></a>背景提要</h4><blockquote>
<p>莱恩是一名程序员，混迹Java界三载有余。从刚接触这门语言起，就被前辈告知必须遵循面向接口编程这一原则。之后，反复翻阅《设计模式》，面向接口编程的理念便深入脑髓。当然，他也不是没有思想的小白，“不好的东西不用”这种基本常识还是有的。人类这种动物，最擅长地就是提问，莱恩也会问“为什么我要面向接口编程呐？”。有经验的老人告诉过他，这样有利于解除耦合，根据依赖倒置原则——高层次的模块不应该依赖低层次的模块，抽象不应该依赖实现，实现应该依赖抽象。换句话说，就是要面向抽象编程。这顿论调，老生常谈了，但是高度概括的东西没有实践的基石，就如同空中楼阁，虚幻飘渺，能否理解，需要看小沙弥的悟性。</p>
</blockquote>
<h4 id="IoC中谁的控制权被反转？"><a href="#IoC中谁的控制权被反转？" class="headerlink" title="IoC中谁的控制权被反转？"></a>IoC中谁的控制权被反转？</h4><blockquote>
<p>莱恩实践过Java界家喻户晓的framework spring，被它强大的IoC容器深深吸引。好莱坞经典语录：“Don’t call me, I’ll call you”。它揭示的是这样一个道理：我需要你自然会找你。莱恩不禁问自己：IoC容器究竟和这个道理有什么关系呢？<br>大师说：获取和管理对象的方式被倒转了。</p>
</blockquote>
<p>接下来，通过一个实际的例子探索IoC容器的意义所在。</p>
<h4 id="面向接口编程＝定义行为的标准"><a href="#面向接口编程＝定义行为的标准" class="headerlink" title="面向接口编程＝定义行为的标准"></a>面向接口编程＝定义行为的标准</h4><p>以开关和灯泡为例：</p>
<blockquote>
<p>最简单的实现：开关依赖(<em>use</em>)灯泡，然后控制。</p>
</blockquote>
<p>这个例子中，开关创建并维护了灯泡的实例。不过有一天，灯泡要延伸出多种类型了。没关系，简单实现：</p>
<blockquote>
<p>开关依赖灯泡这个抽象东西，其余的灯泡派生自灯泡。</p>
</blockquote>
<p>好像问题也不大。然而，实际上开关不会只控制灯泡，还有冰箱，电视，空调呢？我们终于发现，其实开关的职责不是去开关灯泡，而是开合电源。<em>but who cares the electrinic?</em> 所以我们假设电源就是一只信号，某位ruby大牛把所有对象的调用，都看作是向这些对象发送message。用在这里，倒是很合理。</p>
<p>那么现在我们运用接口隔离原则，提升一个最小接口。</p>
<blockquote>
<p>依赖又不是只有聚合、组合，还有继承和<strong>实现(implement)<strong>。这样的话，我们把灯泡依赖到一个具有开合行为的接口。</strong>开关</strong>此时就定义了电源开合的接口。</p>
</blockquote>
<p>这里，灯泡并不知道哪只开关让自己或亮或暗，而开关也只知道开合某个电源接口。言而总之，所谓的面向接口编程等同于定义行为的标准。不过问题来了，谁为开关连上灯泡呢？我们现在只知道开关持有一个开合接口，不能在开关里新建一个灯泡的对象，否则好不容易获得依赖抽象的好处便会付诸东流了。</p>
<p>怎么办？记住计算机中的任何问题都能通过构造一个抽象层解决。IoC容器就是干这件事的，根据各个实例之间的依赖关系创建和管理对象的实例。</p>
<p>所以说，IoC中被反转控制权的是获取和管理对象的方式，它被反转到IoC容器当中了。“I’ll call you.”中的I也就是IoC容器。</p>
<h4 id="谈谈IoC和DI"><a href="#谈谈IoC和DI" class="headerlink" title="谈谈IoC和DI"></a>谈谈IoC和DI</h4><p>大部分书上，都把这两者混为一谈。</p>
<p>DI是IoC的子集。IoC是个泛泛之论，通俗来讲，任何有利于程序高内聚低耦合的框架都具有IoC的特征。在OO里，Dependency被反转；在基于Event的编程模型里，Event Loop被反转了；在Observer Pattern中，Subject通知Observer的方式被反转了。</p>
<h4 id="方法级别上的IoC"><a href="#方法级别上的IoC" class="headerlink" title="方法级别上的IoC"></a>方法级别上的IoC</h4><p>Template Method方法具有IoC的特点：</p>
<ul>
<li>父类方法决定了必要的流程和某些不变的部分；</li>
<li>子类继承父类，重写可变的方法；</li>
<li>子类只关心职责，而不关心流程。</li>
</ul>
<p>所以是父类定义了标准，让子类实现之。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><hr>
<ul>
<li>IoC不等于DI；</li>
<li>IoC不是对象的专利，方法级别一样适用。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/10/30/vim-in-practice/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/10/30/vim-in-practice/" class="post-title-link" itemprop="url">vim in practice (1)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-10-30 23:08:38" itemprop="dateCreated datePublished" datetime="2014-10-30T23:08:38+08:00">2014-10-30</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:39:12" itemprop="dateModified" datetime="2016-09-06T22:39:12+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Vim-Practice"><a href="#Vim-Practice" class="headerlink" title="Vim Practice"></a>Vim Practice</h2><h3 id=""><a href="#" class="headerlink" title="&lt;leader&gt;"></a>&lt;leader&gt;</h3><blockquote>
<p>Vim have a extra key to activate mappings, and call this “prefix” key the “leader”.</p>
<blockquote>
<p>*Mapping keys is one of the places where Vim comments does’t work. </p>
</blockquote>
</blockquote>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let mapleader=&#x27;,&#x27;</span><br><span class="line">nnoremap &lt;leader&gt;ev :vsplit $MYVIMRC&lt;cr&gt;</span><br><span class="line">nnoremap &lt;leader&gt;sv :source $MYVIMRC&lt;cr&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="Abbrevation"><a href="#Abbrevation" class="headerlink" title="Abbrevation"></a>Abbrevation</h3><blockquote>
<p>Vim has a feature called “abbreviations” that feel similar to mappings but are meant for use in insert, replace, and command modes. </p>
</blockquote>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iabbrev what what</span><br><span class="line">when you type *what&lt;space&gt;*</span><br><span class="line">were substituted with *what&lt;space&gt;*</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="Disable-old-keys"><a href="#Disable-old-keys" class="headerlink" title="Disable old keys"></a>Disable old keys</h3><blockquote>
<p>This effectively disables the escape key in insert mode by telling Vim to perform <nop> (no operation) instead.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inoremap &lt;esc&gt; &lt;nop&gt; &quot;no operation</span><br></pre></td></tr></table></figure>

<h3 id="Autocommands"><a href="#Autocommands" class="headerlink" title="Autocommands"></a>Autocommands</h3><blockquote>
<p>Autocommands are the way to tell Vim to run commands whenever certain events happen.</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">:autocmd BufNewFile * :write</span><br><span class="line">         ^          ^ ^</span><br><span class="line">         |          | |</span><br><span class="line">         |          | The command to run.</span><br><span class="line">         |          |</span><br><span class="line">         |          A &quot;pattern&quot; to filter the event.</span><br><span class="line">         |</span><br><span class="line">         The &quot;event&quot; to watch for.</span><br><span class="line"></span><br><span class="line">:autocmd BufWritePre,BufRead *.html :normal gg=G</span><br><span class="line">:help autocmd-events</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="System-clipboard"><a href="#System-clipboard" class="headerlink" title="System clipboard"></a>System clipboard</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BundleInstall fakeclip</span><br><span class="line">1. Normal mode</span><br><span class="line">&quot;+Y or &quot;+yy (use system register&lt;+&gt; to copy)</span><br><span class="line">2. Visual mode</span><br><span class="line">&quot;+Y</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/10/11/briefing-of-programming-language/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/10/11/briefing-of-programming-language/" class="post-title-link" itemprop="url">程序语言的精髓</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-10-11 00:31:34" itemprop="dateCreated datePublished" datetime="2014-10-11T00:31:34+08:00">2014-10-11</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-12 21:53:54" itemprop="dateModified" datetime="2016-09-12T21:53:54+08:00">2016-09-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>当夜幕已近闭合，沉睡的晚灯张起结界，昏黄中没半点柔情，仿佛在告诉行人：非诚勿扰</code></p>
<blockquote>
<p>夜晚11:11分，注定孤独的时分。Carl倚靠窗台失神了半晌，回过来就顺手拉紧了窗帘。拧开台灯，桌上静静地躺着一本书，是日本人西尾太和的《代码之髓》。他翻开扉页，签上自己的大名，满足地撇撇嘴，开始看起来。</p>
</blockquote>
<h3 id="Lisp是这个世界上最精练，最美观的语言"><a href="#Lisp是这个世界上最精练，最美观的语言" class="headerlink" title="Lisp是这个世界上最精练，最美观的语言"></a>Lisp是这个世界上最精练，最美观的语言</h3><hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(setq f</span><br><span class="line">      (let ((x 1))</span><br><span class="line">        (lambda (y) (* x y))))</span><br></pre></td></tr></table></figure>
<p>直观上，这个函数f的结果就是(* 1 y)，也就是y的值。那么实际调用的结果如何呢？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(let ((x 2))</span><br><span class="line">  (funcall f 2))</span><br></pre></td></tr></table></figure>
<p>即f(2)的结果是2？实际运行的结果让人大跌眼镜，是4！</p>
<blockquote>
<p>Carl揉揉被蹂躏多时的眼球，问自己：为什么是这样，像梦一场？</p>
</blockquote>
<p>行文到这里，我们的黑暗主角慢慢走向台前——作用域(Scope)。作用域在程序的世界里，见怪不怪，谁都知道它的第一要务就是防止命名冲突！</p>
<blockquote>
<p>Carl点点头，道：嗯，教材里是这么说的。他抬头看了一下光，阴影里有种烦躁的情绪在跳动。</p>
</blockquote>
<p>其实，作用域是分类别的。Lisp中用到了其中之一的动态作用域(Dynamic Scope)，动态作用域最根本的特点是从时间维度上判断进入和离开某个函数具有独立的作用域。上面Lisp的例子当中，<code>(let ((x 2)) (funcall f 2))</code>表示一个函数，也就是独立的作用域。它调用了f这个函数，但从时间上看，调用点依旧处于原来的作用域当中，所以x&#x3D;2这样的变量在f函数里是有效的，最后的结果是(* 2 y)，等于4也就理所应当了。</p>
<blockquote>
<p>Carl接受了这样的解释，他想：既然存在，那么一定合理。闭目养神的时间里，他的思维遨游了很久，有溺水的迹象，仿佛得到了神启。他想到了人生，理想，家人，婚姻和<code>python2</code></p>
</blockquote>
<h3 id="在python2里面，这个世界里有怪物存在——嵌套的函数和外部作用域的再绑定。"><a href="#在python2里面，这个世界里有怪物存在——嵌套的函数和外部作用域的再绑定。" class="headerlink" title="在python2里面，这个世界里有怪物存在——嵌套的函数和外部作用域的再绑定。"></a>在<code>python2</code>里面，这个世界里有怪物存在——嵌套的函数和外部作用域的再绑定。</h3><hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x = &quot;global&quot;</span><br><span class="line">def foo():</span><br><span class="line">	x = &quot;foo&quot;</span><br><span class="line">	def bar():</span><br><span class="line">		print x</span><br><span class="line">	bar()</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>
<p>答案是global，而不是想当然的foo。<code>python2</code>里头使用了静态作用域(Static Scope), 与动态作用域相对。静态作用域的显著特点是源码级别上拥有独立的作用域，简单地可以理解成每一个函数都是独立的作用域。然后，2011年发布的<code>python2.1</code>修改了逻辑，最终返回了foo，他们显然认为嵌套的函数不是函数，而是形同if&#x2F;else这样的嵌套结构体。感觉上，又回到了当初动态作用域的年代。</p>
<blockquote>
<p>Carl咽了口水，他讨厌动态作用域如同父母窥视了孩子狭小私人空间，这让他很不舒服。有一首诗：阴郁的日子总会过去。接下来，事情总算不太坏。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def foo():</span><br><span class="line">	x = &quot;old&quot;</span><br><span class="line">	def bar():</span><br><span class="line">		x ＝ &quot;new&quot;</span><br><span class="line">	bar()</span><br><span class="line">	print x</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>
<p>这回得到的还是old。</p>
<blockquote>
<p>Carl笑了，这才像话。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">def foo():</span><br><span class="line">	x = &quot;old&quot;</span><br><span class="line">	def bar():</span><br><span class="line">		nonlocal x</span><br><span class="line">		x ＝ &quot;new&quot;</span><br><span class="line">	bar()</span><br><span class="line">	print x</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>
<p>这回得到的却是new。</p>
<blockquote>
<p>Carl哭了。他想起来了，java里的类，private, protected修饰符，还有静态变量。他触摸到了作用域的本质，如同一直看不见的手，抚摸那薄膜面纱背后吹弹可破的脸蛋。至于有没有被赐予洪亮的耳光，那已经是后话了。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/09/25/a-way-to-handle-angularjs-components-problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/09/25/a-way-to-handle-angularjs-components-problem/" class="post-title-link" itemprop="url">AngularJS components</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-09-25 00:08:02" itemprop="dateCreated datePublished" datetime="2014-09-25T00:08:02+08:00">2014-09-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2017-01-01 17:19:50" itemprop="dateModified" datetime="2017-01-01T17:19:50+08:00">2017-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><hr>
<p>假设某种Web App的业务场景是这样的：每个页面仅仅只有简单的表单，包括文字提醒label, 单选radio button, 问题列表dropdown menu, 处理页面前后跳转的button, 复杂一点的如价格输入input，时间选择date picker。而且这些可以独立展现业务价值，也就是说任何一个或者多个这样的页面元素可以经过简单组合，甚至无需组合就能反映一个独立的业务提问（具备评估填写人能力的价值），那么我们就可以将这些页面元素及其简单的组合体作为一个独立的component。这些component最大的好处就是恰如其分地反映了它本身的业务，但是这也不能成为封装成component的理由——因为我们完全可以通过一个良好名称的id来反映。独立出来的好处无非两个：可插拔，能复用。</p>
<p>首先，来讨论一下可插拔这个问题。假如BA美女告诉说某个业务提问T不应该再出现在A页面了，它应该出现在B页面。若不是component，问题来了：我们需要删掉本页面的T，连带着需要删除分散的js和css文件。麻烦！若是独立一个component，简单了先解除该页面对T的使用（在AngularJS中是删除对应的指令），然后在B页面导入进来。因为是component，且每个页面的结构都是表单，代码结构也类似，所以改动的量少。方便！</p>
<p>再来讨论一下能复用这个问题。我刚才提到过，因为是反映一个独立的业务提问，所以很可能在其他同类的产品上，这东西也是存在的，可能唯一不同的就是问法不同，以及提示信息有别。换句话说这些问句和提示是可编辑的。有人说那简单呐，component的所有提问和提示信息弄成可编辑的不就行了？component是可变的（可编辑），但是具体在哪个页面给出什么提问和提示总是不变的吧。我原来也是这样想的，但是仔细想想我发现这里有一个矛盾之处：我们想复用业务，而不是组件！这世界上最不可信的就是业务，最可能变的也是业务，但我们还异想天开地复用业务。任何一个独立的component，在具体的业务上，都很可能不是简单地替换显示文本，它完全会增加一小条额外的询问条目！那么原来的component就只能乖乖地被copy&#x2F;paste成另一个可怜的component——因为它们是不同的业务啊！BA如是说。作为程序员，我讨厌重复的代码，这也是我们不断使用重构的原因。但是就因为业务不同，哪怕代码相似度是99%，我也得重新创建一个，这个实在不值得！</p>
<p>而且，更奇葩地是这些可编辑信息居然被写入了后端的properties文件当中，使用Java这样静态的语言来抽象出一个给这些component提供文本信息的接口。试想一下，哪天某个BA告诉我：我想为某个业务X，添加一个subTitle。我的回答：不行呐，我们的接口只提供了一个label，而且这里已经使用了，我如果加一个新的，会影响其他的所有component的。BA：!&amp;^$%@$. 我接着说：我可以提供一个sub.label的property key，这样前端可以写成 [X.sub].label，如何？BA：呵呵……</p>
<h3 id="探索"><a href="#探索" class="headerlink" title="探索"></a>探索</h3><hr>
<h4 id="简单得出几个结论"><a href="#简单得出几个结论" class="headerlink" title="简单得出几个结论"></a>简单得出几个结论</h4><ul>
<li>不用妄图复用业务，即使它们在UI表现上极其相似；</li>
<li>业务和UI的关系，等同于饮料和瓶子的关系，瓶子一个模子就够了，饮料随便换；</li>
<li>饮料要换个瓶模子了，那换就是，具体是从原来的模子继承，还是组合，饮料不需要关心。</li>
</ul>
<h4 id="如何做瓶子，如何换饮料，如何组合成卖品"><a href="#如何做瓶子，如何换饮料，如何组合成卖品" class="headerlink" title="如何做瓶子，如何换饮料，如何组合成卖品"></a>如何做瓶子，如何换饮料，如何组合成卖品</h4><p>做瓶子简单。作为程序员，我使用AngularJS的Directive构建基础的common components，如radio button, dropdown menu, search box. 这些仅仅和UI相关。当然这些还仅仅是瓶子的组成成分。</p>
<p>那么接下来，如何换饮料呢？饮料有自己的骄傲——它不仅口味各异，还分品牌！每种品牌下的饮料自然不同。那我们只好先做一下分类。先从品牌开始，先分成X, Y, Z这几类，然后开始分口味了，又分成A, B, C这几类。这个季度，老板说我们要推出X类的A, B, C饮料！怎么做？我们把A, B, C写入配置文件(properties)，拿A举例子：A有颜色，甜度，气味三个属性，分别对应如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A:</span><br><span class="line">  color: red</span><br><span class="line">  sweet: middle</span><br><span class="line">  smell: nice</span><br></pre></td></tr></table></figure>
<p>Ok，接下来我们来构造A这款饮料的<strong>业务</strong>的directive</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(function(global, angular)&#123;</span><br><span class="line">    &#x27;use strict&#x27;;</span><br><span class="line">    angular.module(&#x27;a.b.c&#x27;,[])</span><br><span class="line">        .directive(&#x27;A&#x27;, function()&#123;</span><br><span class="line">           return &#123;</span><br><span class="line">               restrict: &#x27;AE&#x27;,</span><br><span class="line">               templateUrl: &#x27;views/A.html&#x27;</span><br><span class="line">           &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line">&#125;)(this, angular);</span><br></pre></td></tr></table></figure>
<p>好了，我们有业务细节A了，又有业务A的directive了。我们理所应当地认为这个directive和A应该是一体的，为什么不直接将A细节写入directive的scope中呢？答案是X, Y, Z在这里是可以复用这个directive的，所以不能硬编码。不能硬编码，我首先的直觉就是变量替换，又要求复用，那么就立马想到了继承或者组合。又因为组合优于继承（更现实的是我不知道如何在AngularJS中实现继承），我决定使用组合。接下来这个过程的产出物就是我们的卖品，构造如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># define in common module</span><br><span class="line">A:&#123;</span><br><span class="line">  color: red,</span><br><span class="line">  sweet: middle,</span><br><span class="line">  smell: nice</span><br><span class="line">&#125;</span><br><span class="line">##</span><br><span class="line"></span><br><span class="line">(function(global, angular)&#123;</span><br><span class="line">    &#x27;use strict&#x27;;</span><br><span class="line">    angular.module(&#x27;a.b.c&#x27;, [&#x27;common&#x27;])</span><br><span class="line">        .directive(&#x27;A&#x27;, [&#x27;me&#x27;, function()&#123;</span><br><span class="line">           return &#123;</span><br><span class="line">               restrict: &#x27;AE&#x27;,</span><br><span class="line">               scope: &#123;</span><br><span class="line">                  self: &#x27;=&#x27;</span><br><span class="line">               &#125;,</span><br><span class="line">               link: function($scope) &#123;</span><br><span class="line">               	   $scope.self = me;</span><br><span class="line">               &#125;,</span><br><span class="line">               templateUrl: &#x27;views/A.html&#x27;</span><br><span class="line">           &#125;;</span><br><span class="line">        &#125;]);</span><br><span class="line">&#125;)(this, angular);</span><br></pre></td></tr></table></figure>
<p>从代码中很容易看出，我们把A这个业务，组成了一个叫做common的module，可以类比为装着众多饮料的机器，然后对准一个叫做A的瓶子注入，注意A这个瓶子用到了很多common components。这整个过程就是Angular完成这个A的directive的过程，也就是饮料和瓶子组装的过程。然后这个A的directive就是我们的卖品。</p>
<h3 id="实际成效"><a href="#实际成效" class="headerlink" title="实际成效"></a>实际成效</h3><hr>
<p>事实验证，上述的方式是不合理的。理由有下面三点：</p>
<ul>
<li>依赖过剩。我们将会有很多的components，如果每次都得手动注入common依赖的话，量实在是太大了。</li>
<li>非独立。一个纯净的业务组件不应该有第三方的依赖，有依赖，必然导致无法独立使用。</li>
<li>不可扩展设备。这个最大的怪兽就是我们将业务的东西全部放到了前端，如果要兼容其他设备，我们后端的这块业务功能是缺失的，不能给其他设备提供支持。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/09/22/cong-oodao-aopzai-dao-fp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/09/22/cong-oodao-aopzai-dao-fp/" class="post-title-link" itemprop="url">从OO到AOP再到FP</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-09-22 00:22:39" itemprop="dateCreated datePublished" datetime="2014-09-22T00:22:39+08:00">2014-09-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:38:46" itemprop="dateModified" datetime="2016-09-06T22:38:46+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="我的疑问"><a href="#我的疑问" class="headerlink" title="我的疑问"></a>我的疑问</h3><hr>
<h4 id="面向对象编程和函数式编程的最大不同点在什么地方？"><a href="#面向对象编程和函数式编程的最大不同点在什么地方？" class="headerlink" title="面向对象编程和函数式编程的最大不同点在什么地方？"></a>面向对象编程和函数式编程的最大不同点在什么地方？</h4><ul>
<li><p>数据从何而来？面向对象编程中的数据都是对象本身产生的，也就是说对象的基础建立在它本身的属性上，没有属性，那么这个对象什么都不能做。函数式（闭包）的过程数据来自于外部，也就是说闭包本身是不维护数据的。这样的好处是只管逻辑，而不用维护数据本身复杂的状态。</p>
</li>
<li><p>数据的状态如何？面向对象编程中数据（也就是属性）是可以改变的，而函数式中数据是不可以改变的。</p>
</li>
<li><p>没有属性的对象，还是面向对象嘛？我认为controller, service, DAO(repository)其实都是没有数据的对象！也就是说这些分层结构其实都是函数式编程可以应用的地方。有人会说奇怪了，controller中明明有service属性，service中明明有DAO属性啊，怎么能说没有数据呢？其实，这个只是调用链（我喜欢把它们看作是filter），真正的数据（大概被称为model）是被一层层传递下去的。可能又有人会反驳，函数式中最大的特点就是数据不可变，这些真正的数据（model）在传递过程中其实是会被改变的，所以怎么能说这些地方可以应用函数式编程？我认为，这些数据在各个层上应该是不同类的。展现给view的，和存储到database中的model是很难相同的，所以也就存在一种模型之间转化的可能，一个模型变成另一个新的模型，模型本身是不会变的。</p>
</li>
<li><p>没有方法的值对象呢？就是数据吧。</p>
</li>
</ul>
<h4 id="AOP和函数式编程有没有关系？"><a href="#AOP和函数式编程有没有关系？" class="headerlink" title="AOP和函数式编程有没有关系？"></a>AOP和函数式编程有没有关系？</h4><hr>
<h5 id="AOP是什么？"><a href="#AOP是什么？" class="headerlink" title="AOP是什么？"></a>AOP是什么？</h5><blockquote>
<p>AOP是面向切面编程。我们平时编写web程序的时候，通常都会使用controller-&gt;service-&gt;dao这样的层次结构的调用链。事实上，有些逻辑不是纵向延伸的，对于单个的层级，如service，一个典型的应用就是Log处理：我们需要对service中涉及写入数据库的操作进行记录，这样的逻辑对于service上的所有需要log记录的方法而言是通用的。所以没有必要在各个不同的services上手工记录log，我们只需要将这部分log的逻辑抽出来作为独立的方法，然后很形象地表述成在services上的方法打上一个个洞，将这部分独立的方法像插槽（阀门）一样插入这些洞里，流过services上这些被记录的方法上的数据及其本身就会被完整的记录下来。</p>
</blockquote>
<blockquote>
<p>AOP的概念也很有趣。事实上，AOP中的Joinpoint,Pointcut,Advice可以分别类比为钩子，晾衣杆和晾衣服这个动作。Joinpoint就是要拿来鼓捣的方法，Pointcut则是将这些方法串起来，Advice是统一处理这些方法的逻辑操作，同时也包括了它自身的执行时机，是在Pointcut之前、之后或是其中，当然更有甚者，是在方法返回之后，还是抛出异常之后呢？</p>
</blockquote>
<blockquote>
<p>那么接下来，我们来看看AOP和函数式编程到底有没有关系。第一个方面，AOP其实是间接地拿函数作为自己的参数了。举个例子，拦截controller的方法：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@AfterReturning(value = &quot;execution(* controller.*.*(..)) &amp;&amp; args(customer)&quot;,</span><br><span class="line">        returning = &quot;result&quot;)</span><br><span class="line">public void aMethod(Customer customer, String result) &#123;</span><br><span class="line">    System.out.println(&quot;before&quot;);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">    System.out.println(&quot;after&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>其实这样的方式——既拿到了输入参数，又拿到了输出参数，就等于已经拿到了整个方法，何况还有牛掰的@Around，直接拿人家的方法到自己的方法体里执行。而函数式第一要点就是函数是一等公民，函数可以作为参数传递。所以说从获取参数这个层面说，两者实在太相像了。</p>
</blockquote>
<blockquote>
<p>第二个方面，抽取共有逻辑。函数式中有惰性求值，假设我们在函数式中预留一个Function作为钩子，任何想使用这部分函数逻辑的在需要的时候，通过某种机制传递真正的Function到我们的预留参数中，是不是也能实现抽取共有逻辑呢？还有，我们之所以有很多services，是因为model（domain）存在差异，假设函数式中没有OO的概念，model似乎就趋同了，那么或许我们根本不需要services。所以函数式是可以抽取共有逻辑的，或者说这部分逻辑本来就不应该分散到各个services中。</p>
</blockquote>
<blockquote>
<p>结论处，我大胆地猜测：AOP其实就是OO被掣肘之后，利用函数式缝补自身的妥协方案。AOP本来就是Functional programming.</p>
</blockquote>
<h4 id="Functional-Programming的要点"><a href="#Functional-Programming的要点" class="headerlink" title="Functional Programming的要点"></a>Functional Programming的要点</h4><hr>
<ul>
<li>声明式编程</li>
<li>不变量</li>
<li>无副作用的函数</li>
<li>不会依附于任何类或者对象，这点“functional programming for java developer”中有清楚描述。在java中写的大部分函数式代码都是静态的，但逻辑上，它不属于这个类。</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/09/21/mysql-mess-encoding/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/09/21/mysql-mess-encoding/" class="post-title-link" itemprop="url">MySQL乱码及解决方案</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-09-21 20:44:04" itemprop="dateCreated datePublished" datetime="2014-09-21T20:44:04+08:00">2014-09-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:38:25" itemprop="dateModified" datetime="2016-09-06T22:38:25+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Mysql-5-5-CharacterSet-Configuration"><a href="#Mysql-5-5-CharacterSet-Configuration" class="headerlink" title="Mysql 5.5 CharacterSet Configuration"></a>Mysql 5.5 CharacterSet Configuration</h2><h3 id="Client-Configuration"><a href="#Client-Configuration" class="headerlink" title="Client Configuration"></a>Client Configuration</h3><ul>
<li>#1 No need to restart server for setting client</li>
</ul>
<p><strong>When</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set = utf8</span><br></pre></td></tr></table></figure>
<p><strong>Then</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql  Ver 14.14 Distrib 5.5.38, for debian-linux-gnu (x86_64) using readline 6.2</span><br><span class="line"></span><br><span class="line">Connection id:		40</span><br><span class="line">Current database:</span><br><span class="line">Current user:		root@localhost</span><br><span class="line">SSL:			Not in use</span><br><span class="line">Current pager:		stdout</span><br><span class="line">Using outfile:		&#x27;&#x27;</span><br><span class="line">Using delimiter:	;</span><br><span class="line">Server version:		5.5.38-0ubuntu0.12.04.1 (Ubuntu)</span><br><span class="line">Protocol version:	10</span><br><span class="line">Connection:		Localhost via UNIX socket</span><br><span class="line">Server characterset:	latin1</span><br><span class="line">Db     characterset:	latin1</span><br><span class="line">Client characterset:	utf8</span><br><span class="line">Conn.  characterset:	utf8</span><br></pre></td></tr></table></figure>
<ul>
<li>#2 It will change <code>character_set_client &amp; character_set_connection &amp; character_set_results</code> without client’s setting.</li>
</ul>
<p><strong>When</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">#default-character-set = utf8</span><br></pre></td></tr></table></figure>
<p><strong>Then</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Connection id:		37</span><br><span class="line">Current database:	mall</span><br><span class="line">Current user:		root@localhost</span><br><span class="line">SSL:			Not in use</span><br><span class="line">Current pager:		stdout</span><br><span class="line">Using outfile:		&#x27;&#x27;</span><br><span class="line">Using delimiter:	;</span><br><span class="line">Server version:		5.5.38-0ubuntu0.12.04.1 (Ubuntu)</span><br><span class="line">Protocol version:	10</span><br><span class="line">Connection:		Localhost via UNIX socket</span><br><span class="line">Server characterset:	utf8</span><br><span class="line">Db     characterset:	utf8</span><br><span class="line">Client characterset:	latin1</span><br><span class="line">Conn.  characterset:	latin1</span><br><span class="line">UNIX socket:		/var/run/mysqld/mysqld.sock</span><br><span class="line">Uptime:			14 min 4 sec</span><br></pre></td></tr></table></figure>
<p><strong>And Then</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">For a special DB.</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| Variable_name            | Value                      |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| character_set_client     | latin1                     |</span><br><span class="line">| character_set_connection | latin1                     |</span><br><span class="line">| character_set_database   | utf8                       |</span><br><span class="line">| character_set_filesystem | binary                     |</span><br><span class="line">| character_set_results    | latin1                     |</span><br><span class="line">| character_set_server     | utf8                       |</span><br><span class="line">| character_set_system     | utf8                       |</span><br><span class="line">| character_sets_dir       | /usr/share/mysql/charsets/ |</span><br><span class="line">+--------------------------+----------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="Server-Configuration"><a href="#Server-Configuration" class="headerlink" title="Server Configuration"></a>Server Configuration</h3><ul>
<li>#1 Restart mysql server without <em>character-set-server&#x3D;utf8</em></li>
</ul>
<p><strong>When</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">#character-set-server=utf8</span><br></pre></td></tr></table></figure>
<p><strong>Then</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql  Ver 14.14 Distrib 5.5.38, for debian-linux-gnu (x86_64) using readline 6.2</span><br><span class="line"></span><br><span class="line">Connection id:		42</span><br><span class="line">Current database:</span><br><span class="line">Current user:		root@localhost</span><br><span class="line">SSL:			Not in use</span><br><span class="line">Current pager:		stdout</span><br><span class="line">Using outfile:		&#x27;&#x27;</span><br><span class="line">Using delimiter:	;</span><br><span class="line">Server version:		5.5.38-0ubuntu0.12.04.1 (Ubuntu)</span><br><span class="line">Protocol version:	10</span><br><span class="line">Connection:		Localhost via UNIX socket</span><br><span class="line">Server characterset:	latin1</span><br><span class="line">Db     characterset:	latin1</span><br><span class="line">Client characterset:	utf8</span><br><span class="line">Conn.  characterset:	utf8</span><br><span class="line">UNIX socket:		/var/run/mysqld/mysqld.sock</span><br><span class="line">Uptime:			8 min 47 sec</span><br></pre></td></tr></table></figure>
<ul>
<li>#2 Create a new database <em>newa</em> without <em>character-set-server&#x3D;utf8</em></li>
</ul>
<p><strong>When</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line"># character-set-server=utf8</span><br></pre></td></tr></table></figure>
<p><strong>Then</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Connection id:		36</span><br><span class="line">Current database:	newa</span><br><span class="line">Current user:		root@localhost</span><br><span class="line">SSL:			Not in use</span><br><span class="line">Current pager:		stdout</span><br><span class="line">Using outfile:		&#x27;&#x27;</span><br><span class="line">Using delimiter:	;</span><br><span class="line">Server version:		5.5.38-0ubuntu0.12.04.1 (Ubuntu)</span><br><span class="line">Protocol version:	10</span><br><span class="line">Connection:		Localhost via UNIX socket</span><br><span class="line">Server characterset:	utf8</span><br><span class="line">Db     characterset:	latin1</span><br><span class="line">Client characterset:	utf8</span><br><span class="line">Conn.  characterset:	utf8</span><br><span class="line">UNIX socket:		/var/run/mysqld/mysqld.sock</span><br><span class="line">Uptime:			12 sec</span><br></pre></td></tr></table></figure>
<ul>
<li>#3 Restart server with <em>character-set-server&#x3D;utf8</em></li>
</ul>
<p><strong>When</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8</span><br></pre></td></tr></table></figure>
<p><strong>Then</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Connection id:		38</span><br><span class="line">Current database:</span><br><span class="line">Current user:		root@localhost</span><br><span class="line">SSL:			Not in use</span><br><span class="line">Current pager:		stdout</span><br><span class="line">Using outfile:		&#x27;&#x27;</span><br><span class="line">Using delimiter:	;</span><br><span class="line">Server version:		5.5.38-0ubuntu0.12.04.1 (Ubuntu)</span><br><span class="line">Protocol version:	10</span><br><span class="line">Connection:		Localhost via UNIX socket</span><br><span class="line">Server characterset:	utf8</span><br><span class="line">Db     characterset:	utf8</span><br><span class="line">Client characterset:	utf8</span><br><span class="line">Conn.  characterset:	utf8</span><br><span class="line">UNIX socket:		/var/run/mysqld/mysqld.sock</span><br><span class="line">Uptime:			23 min 46 sec</span><br></pre></td></tr></table></figure>
<p><strong>But For <em>newa</em> DB</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CConnection id:		38</span><br><span class="line">Current database:	newa</span><br><span class="line">Current user:		root@localhost</span><br><span class="line">SSL:			Not in use</span><br><span class="line">Current pager:		stdout</span><br><span class="line">Using outfile:		&#x27;&#x27;</span><br><span class="line">Using delimiter:	;</span><br><span class="line">Server version:		5.5.38-0ubuntu0.12.04.1 (Ubuntu)</span><br><span class="line">Protocol version:	10</span><br><span class="line">Connection:		Localhost via UNIX socket</span><br><span class="line">Server characterset:	utf8</span><br><span class="line">Db     characterset:	***latin1***</span><br><span class="line">Client characterset:	utf8</span><br><span class="line">Conn.  characterset:	utf8</span><br><span class="line">UNIX socket:		/var/run/mysqld/mysqld.sock</span><br><span class="line">Uptime:			22 min 36 sec</span><br></pre></td></tr></table></figure>
<p><strong>So That Means</strong></p>
<blockquote>
</blockquote>
<p>The character set used by the default database. The server sets this variable whenever the default database changes. If there is no default database, the variable has the same value as character_set_server.</p>
<h3 id="conclusion"><a href="#conclusion" class="headerlink" title="conclusion"></a>conclusion</h3><ul>
<li><p>For client, connection, results, you should add<br><code>[client] default-character-set = utf8</code></p>
</li>
<li><p>For server and DB, you should add<br><code>[mysqld] character-set-server=utf8</code></p>
</li>
<li><p>You should drop original DB when created in error character set, just like <em>newa</em> DB</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/07/06/sublime-plugins-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/07/06/sublime-plugins-install/" class="post-title-link" itemprop="url">Powerful sublime text3 plugins</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-07-06 00:18:20" itemprop="dateCreated datePublished" datetime="2014-07-06T00:18:20+08:00">2014-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:38:21" itemprop="dateModified" datetime="2016-09-06T22:38:21+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Sublime-Text3-Plugins"><a href="#Sublime-Text3-Plugins" class="headerlink" title="Sublime Text3 Plugins"></a>Sublime Text3 Plugins</h2><h3 id="jshint-for-sublime-installation"><a href="#jshint-for-sublime-installation" class="headerlink" title="jshint for sublime installation"></a>jshint for sublime installation</h3><ol>
<li>brew install nodejs</li>
<li>npm install -g jshint</li>
<li>open sublime &amp; package control install jshint</li>
<li>that’s ok</li>
</ol>
<hr>
<h3 id="install-SublimeOnSaveBuild"><a href="#install-SublimeOnSaveBuild" class="headerlink" title="install SublimeOnSaveBuild"></a>install SublimeOnSaveBuild</h3><ol>
<li>open sublime &amp; package control install SublimeOnSaveBuild</li>
<li>that will build jshint once save</li>
</ol>
<hr>
<h3 id="expand-region"><a href="#expand-region" class="headerlink" title="expand region"></a>expand region</h3><ol>
<li>open sublime &amp; package control install Expand_region</li>
<li>change the default-keymap<br>{ “keys”: [“super+w”], “command”: “expand_region”}</li>
</ol>
<hr>
<h3 id="jshint-gutter"><a href="#jshint-gutter" class="headerlink" title="jshint gutter"></a>jshint gutter</h3><ol>
<li>open sublime &amp; package control install jshint gutter</li>
<li>ctrl+shit+j to lint code!</li>
</ol>
<hr>
<h3 id="PackageResourceViewer"><a href="#PackageResourceViewer" class="headerlink" title="PackageResourceViewer"></a>PackageResourceViewer</h3><ol>
<li>install PackageResourceViewer by package control</li>
<li>ctrl+shift+p to use ‘open resource’</li>
<li>find tm.theme, then add something end</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;dict&gt;</span><br><span class="line">           &lt;key&gt;name&lt;/key&gt;</span><br><span class="line">           &lt;string&gt;Bracket Curly&lt;/string&gt;</span><br><span class="line">           &lt;key&gt;scope&lt;/key&gt;</span><br><span class="line">           &lt;string&gt;brackethighlighter.curly&lt;/string&gt;</span><br><span class="line">           &lt;key&gt;settings&lt;/key&gt;</span><br><span class="line">           &lt;dict&gt;</span><br><span class="line">               &lt;key&gt;foreground&lt;/key&gt;</span><br><span class="line">               &lt;string&gt;#CC99CC&lt;/string&gt;</span><br><span class="line">           &lt;/dict&gt;</span><br><span class="line">       &lt;/dict&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="BracketHighter"><a href="#BracketHighter" class="headerlink" title="BracketHighter"></a>BracketHighter</h3><ol>
<li>must have packageresourceviewer at first</li>
<li>clear the annotation of color, and then save</li>
</ol>
<h3 id="Trailing-Spaces"><a href="#Trailing-Spaces" class="headerlink" title="Trailing Spaces"></a>Trailing Spaces</h3><ol>
<li>install Trailing Spaces by package control</li>
<li>configure keymap</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">        &quot;command&quot;: &quot;toggle_trailing_spaces&quot;,</span><br><span class="line">        &quot;keys&quot;: [</span><br><span class="line">            &quot;ctrl+shift+d&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;command&quot;: &quot;delete_trailing_spaces&quot;,</span><br><span class="line">        &quot;keys&quot;: [</span><br><span class="line">            &quot;ctrl+shift+t&quot;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>configure trailing_spaces.sublime-settings</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## color: invaild, comment, error</span><br><span class="line">&#123;</span><br><span class="line">	&quot;trailing_spaces_highlight_color&quot;: &quot;comment&quot;,</span><br><span class="line">	&quot;trailing_spaces_trim_on_save&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Centurion-theme"><a href="#Centurion-theme" class="headerlink" title="Centurion theme"></a>Centurion theme</h3><ol>
<li>install theme Centurion first,</li>
<li>open Preferences-&gt;Settings - User,</li>
<li>insert <code>&#123;&quot;theme&quot;: &quot;Centurion.sublime-theme&quot;&#125;</code>,</li>
<li>every time, subl3 use .sublime-theme as suffix.</li>
</ol>
<hr>
<h3 id="install-SyncedSideBar-keep-sync-between-sidebar-and-opening-file"><a href="#install-SyncedSideBar-keep-sync-between-sidebar-and-opening-file" class="headerlink" title="install SyncedSideBar (keep sync between sidebar and opening file)"></a>install SyncedSideBar (keep sync between sidebar and opening file)</h3><ol>
<li>install SyncedSideBar,</li>
<li>open Preference-&gt;Key Bindings - User,</li>
<li>configure keymap</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      &quot;command&quot;: &quot;reveal_in_side_bar&quot;,</span><br><span class="line">      &quot;keys&quot;: [&quot;alt+f1&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/07/05/rake-version-conflicts-and-chiness-support-for-generating-octopress/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/07/05/rake-version-conflicts-and-chiness-support-for-generating-octopress/" class="post-title-link" itemprop="url">Rake version conflicts</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-07-05 10:50:37" itemprop="dateCreated datePublished" datetime="2014-07-05T10:50:37+08:00">2014-07-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:38:14" itemprop="dateModified" datetime="2016-09-06T22:38:14+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="Rake-Version-Conflicts"><a href="#Rake-Version-Conflicts" class="headerlink" title="Rake Version Conflicts"></a>Rake Version Conflicts</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bundle exec rake CMD.</span><br></pre></td></tr></table></figure>

<h3 id="Invalid-byte-sequence-in-US-ASCII"><a href="#Invalid-byte-sequence-in-US-ASCII" class="headerlink" title="Invalid byte sequence in US-ASCII"></a>Invalid byte sequence in US-ASCII</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">*Excpetion*</span><br><span class="line">bundle exec rake generate</span><br><span class="line">(in /Users/qianyan/Dropbox/octopress)</span><br><span class="line">Generating Site with Jekyll</span><br><span class="line">identical source/stylesheets/screen.css</span><br><span class="line">Configuration from /Users/qianyan/Dropbox/octopress/_config.yml</span><br><span class="line">Building site: source -&gt; public</span><br><span class="line">YAML Exception reading 2013-12-10-hello-world.markdown: invalid byte sequence in US-ASCII</span><br></pre></td></tr></table></figure>
<h3 id="Resolve-this-problem"><a href="#Resolve-this-problem" class="headerlink" title="Resolve this problem"></a>Resolve this problem</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; vim ~/.zshrc</span><br><span class="line">export LC_ALL=en_US.UTF-8</span><br><span class="line">export LANG=en_US.UTF-8</span><br><span class="line">&gt; source ~/.zshrc</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/07/05/custom-oh-my-zsh-theme-to-support-svn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/07/05/custom-oh-my-zsh-theme-to-support-svn/" class="post-title-link" itemprop="url">Custom Oh-my-zsh theme to support svn</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-07-05 03:03:17" itemprop="dateCreated datePublished" datetime="2014-07-05T03:03:17+08:00">2014-07-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:38:00" itemprop="dateModified" datetime="2016-09-06T22:38:00+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <ol>
<li><p>Find your theme file in ~&#x2F;.oh-my-zsh&#x2F;themes&#x2F;, then edit it;</p>
</li>
<li><p>Add <code>local svn_info=&#39;$(svn_prompt_info)&#39;</code>;</p>
</li>
<li><p>Append <code>%&#123;$reset_color%&#125;$&#123;svn_info&#125;</code> to Prompt variable;</p>
</li>
<li><p>Add followings to END-OF-FILE.</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ZSH_THEME_SVN_PROMPT_PREFIX=&quot;%&#123;$fg_bold[blue]%&#125;svn:(&quot;</span><br><span class="line">ZSH_THEME_SVN_PROMPT_SUFFIX=&quot;%&#123;$fg_bold[blue]%&#125;)&quot;</span><br><span class="line">ZSH_THEME_SVN_PROMPT_DIRTY=&quot;%&#123;$fg[red]%&#125; ✘ %&#123;$reset_color%&#125;&quot;</span><br><span class="line">ZSH_THEME_SVN_PROMPT_CLEAN=&quot;%&#123;$FG[040]%&#125; ✔&quot;</span><br></pre></td></tr></table></figure>
<h3 id="And-you-can-refer-the-theme-awesomepanda"><a href="#And-you-can-refer-the-theme-awesomepanda" class="headerlink" title="And you can refer the theme (awesomepanda)"></a>And you can refer the theme <em>(awesomepanda)</em></h3>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://qianyan.github.io/2014/05/16/vagrant-mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Ryan Qian">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鄢倩">
      <meta itemprop="description" content="Senior Consultant | DevOps Master | Blockchain & Web3 Specialist">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 鄢倩">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2014/05/16/vagrant-mysql/" class="post-title-link" itemprop="url">How to install mysql with vagrant</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2014-05-16 16:45:45" itemprop="dateCreated datePublished" datetime="2014-05-16T16:45:45+08:00">2014-05-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2016-09-06 22:37:55" itemprop="dateModified" datetime="2016-09-06T22:37:55+08:00">2016-09-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">技术</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="修改Vagrantfile"><a href="#修改Vagrantfile" class="headerlink" title="修改Vagrantfile"></a>修改Vagrantfile</h3><hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 把客户机器（ubuntu）的port 3306 映射到宿主机器上的port 3306</span><br><span class="line">config.vm.network :forwarded_port, guest: 3306, host: 3306</span><br><span class="line"></span><br><span class="line"># 执行安装程序</span><br><span class="line">config.vm.provision :shell :path =&gt; &quot;install_mysql.sh&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="mysql安装程序"><a href="#mysql安装程序" class="headerlink" title="mysql安装程序"></a>mysql安装程序</h3><hr>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">echo &quot;Setup mysql-server-5.5 if not exists..&quot;</span><br><span class="line">sudo debconf-set-selections &lt;&lt;&lt; &#x27;mysql-server-5.5</span><br><span class="line">mysql-server/root_password password root&#x27;</span><br><span class="line">sudo debconf-set-selections &lt;&lt;&lt; &#x27;mysql-server-5.5</span><br><span class="line">mysql-server/root_password_again password root&#x27;</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install mysql-server-5.5</span><br><span class="line"></span><br><span class="line">if [ ! -f /var/log/databasesetup ];</span><br><span class="line">then</span><br><span class="line">	echo &quot;CREATE USER &#x27;codeeker&#x27; IDENTIFIED BY &#x27;codeeker&#x27;&quot; | mysql -uroot -proot</span><br><span class="line">	echo &quot;CREATE DATABASE mall&quot; | mysql -uroot -proot</span><br><span class="line">	echo &quot;GRANT ALL ON mall.* TO &#x27;codeeker&#x27;@&#x27;%&#x27;&quot; | mysql -uroot -proot</span><br><span class="line">	echo &quot;flush privileges&quot; | mysql -uroot -proot</span><br><span class="line"></span><br><span class="line">	touch /var/log/databasesetup #为了不重复执行创建用户的操作</span><br><span class="line"></span><br><span class="line">	if [ -f /vagrant/data/initial.sql ];</span><br><span class="line">	then</span><br><span class="line">			mysql -uroot -proot codeeker &lt; /vagrant/data/initial.sql</span><br><span class="line">	fi</span><br><span class="line">fi</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="陷阱"><a href="#陷阱" class="headerlink" title="陷阱"></a>陷阱</h3><h4 id="错误一"><a href="#错误一" class="headerlink" title="错误一"></a>错误一</h4><ul>
<li>报错误<code>Lost connection to MySQL server at &#39;reading initial communication packet&#39;, system error: 0</code></li>
<li>原因是 &#x2F;etc&#x2F;mysql&#x2F;my.cnf中有<code>bind-address = 127.0.0.1</code>，会拒绝非localhost的访问，包括vagrant映射port到的宿主主机上</li>
<li>解决的方法是修改<code>bind-address = 0.0.0.0</code>，表示接受本网络中所有的ip登录</li>
</ul>
<h4 id="错误二"><a href="#错误二" class="headerlink" title="错误二"></a>错误二</h4><p><code>echo &quot;CREATE USER &#39;codeeker&#39; IDENTIFIED BY &#39;codeeker&#39;&quot; | mysql -uroot -proot</code></p>
<p>如果写成了</p>
<p><code>echo &quot;CREATE USER &#39;codeeker&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;codeeker&#39;&quot; | mysql -uroot -proot</code></p>
<p>那么在宿主的机器上，会报<code>access deny</code>错误。</p>
<ul>
<li>原因是这样创建的用户，只能在localhost上登录</li>
<li>解决的方法是去掉<code>@&#39;localhost&#39;</code></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="上一页" aria-label="上一页" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" title="下一页" aria-label="下一页" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Ryan Qian</span>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>






  <script src="/js/third-party/addtoany.js"></script>

  





</body>
</html>
